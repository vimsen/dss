var drawChart=function(e){var a=new EventSource(e),n=[],t=!1,o=function(){var e=[];$.each(n,function(a,n){e.push({label:"Prosumer "+a,data:n})}),$.plot($("#placeholder"),e,{xaxis:{mode:"time",timeformat:"%Y/%m/%d<br/> %h:%M:%S",timezone:"browser"}})},r=function(){t&&(o(),t=!1)};$(window).on("resize orientationChanged",function(){o()}),a.addEventListener("messages.create",function(e){message=JSON.parse(e.data);var a=message.prosumer_id,o=[1e3*message.X,message.Y];a>0&&(null==n[a]&&(n[a]=[]),n[a].push(o),t=!0),window.setTimeout(r,100)})};